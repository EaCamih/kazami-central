name: Responder a issues com template

on:
  issues:
    types: [opened]

jobs:
  responder:
    runs-on: ubuntu-latest
    steps:
      - name: Responder √† issue com coment√°rio e rea√ß√£o
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const token = process.env.GITHUB_TOKEN;
            const octokit = github.getOctokit(token);
            
            const { context } = github;
            const issue_number = context.issue.number;
            const repo = context.repo.repo;
            const owner = context.repo.owner;
            const title = context.payload.issue.title.toLowerCase();
            const body = context.payload.issue.body;

            if (title.includes("bug") || body.includes("### Descreva o problema")) {
              await octokit.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: "üêû Obrigada por reportar um bug! Vamos analisar assim que poss√≠vel."
              });
              await octokit.rest.reactions.createForIssue({
                owner,
                repo,
                issue_number,
                content: "heart"
              });
            } else if (title.includes("sugest√£o") || body.includes("### Qual funcionalidade voc√™ sugere?")) {
              await octokit.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: "‚ú® Obrigada pela sugest√£o! Iremos avaliar essa ideia üíú"
              });
              await octokit.rest.reactions.createForIssue({
                owner,
                repo,
                issue_number,
                content: "rocket"
              });
            } else {
              await octokit.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: "‚ö†Ô∏è Oi! Parece que sua issue n√£o segue um dos templates. Por favor, edite ou feche e crie novamente usando os bot√µes de template."
              });
              await octokit.rest.reactions.createForIssue({
                owner,
                repo,
                issue_number,
                content: "confused"
              });
            }
