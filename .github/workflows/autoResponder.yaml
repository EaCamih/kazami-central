name: Responder a issues com template

on:
  issues:
    types: [opened]

jobs:
  responder:
    runs-on: ubuntu-latest
    steps:
      - name: Verificar conte√∫do da issue
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const { github, context } = require('@actions/github'); // Ensure proper initialization
            const title = context.payload.issue.title.toLowerCase();
            const body = context.payload.issue.body;
            const issue_number = context.issue.number;
            const repo = context.repo.repo;
            const owner = context.repo.owner;

            // Exemplo de l√≥gica para diferentes templates
            if (title.includes("bug") || body.includes("### Descreva o problema")) {
              await github.rest.issues.createComment({ // Use github.rest for API calls
                owner,
                repo,
                issue_number,
                body: "üêû Obrigada por reportar um bug! Vamos analisar assim que poss√≠vel."
              });
              await github.rest.reactions.createForIssue({
                owner,
                repo,
                issue_number,
                content: "beetle"
              });
            } else if (title.includes("sugest√£o") || body.includes("### Qual funcionalidade voc√™ sugere?")) {
              await github.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: "‚ú® Obrigada pela sugest√£o! Iremos avaliar essa ideia üíú"
              });
              await github.rest.reactions.createForIssue({
                owner,
                repo,
                issue_number,
                content: "sparkles"
              });
            } else {
              await github.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: "‚ö†Ô∏è Oi! Parece que sua issue n√£o segue um dos templates. Por favor, edite ou feche e crie novamente usando os bot√µes de template."
              });
              await github.rest.reactions.createForIssue({
                owner,
                repo,
                issue_number,
                content: "confused"
              });
            }
